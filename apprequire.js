(function(){var p=this,n,j=Object.prototype.toString,x=p.document,m=x.getElementsByTagName("head")[0]||x.getElementsByTagName("body")[0],f=!!p.ActiveXObject,b={mpackage:null,modules:{},timeout:6000},c=[],i=[],s=[];function k(y){return j.apply(y)==="[object Array]"}function l(z,y){return z===null||z===undefined||((k(z)&&!z.length))||(!y?z==="":false)}function d(C,B,A){if(l(C,true)){return}for(var z=0,y=C.length;z<y;z++){if(B.call(A||C[z],C[z],z,C)===false){return z}}}function g(A,z,y){if(l(A)){return}if(k(A)||A.callee){d(A,z,y);return}else{if(typeof A=="object"){for(var B in A){if(A.hasOwnProperty(B)){if(z.call(y||A,B,A[B],A)===false){return}}}}}}function o(A,z,y){for(var B in z){if(!(B in A)||y){A[B]=z[B]}}}function v(C,B){var y=r(C),z;B=(B.charAt(B.length-1)==="/")?B:B+"/";if(B.charAt(0)==="/"){return a(y,B)}z=r(B);z.directory="";if(a(z,"")!==""){return B}z=y.directory.split("/");z=z.concat(B.split("/"));for(var A=1;((part=z[A])!==n);A++){if((part===".")||(part==="")){z.splice(A,1);A-=1}else{if(part===".."){z.splice(A-1,2);A-=2}}}return a(y,z.join("/"))+"/"}function r(C){var B={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},y=B.parser.strict.exec(C),A={},z=14;while(z--){A[B.key[z]]=y[z]||""}A[B.q.name]={};A[B.key[12]].replace(B.q.parser,function(E,D,F){if(D){A[B.q.name][D]=F}});return A}function a(y,A){var z;z=((y.protocol)?(y.protocol+"://"):"");z=z+((y.authority)?y.authority:"");return z+((A)?A:((y.directory)?y.directory:""))}function w(y,A,B,z){this.context=y;this.parentPackage=A;this.id=B;this.uri=z;this.exports=null;this.creatorFn=null;this.module=null;this.deps=[]}w.prototype.require=function(C,B,A){if(k(C)){A=B;B=C;C=""}if(typeof B==="function"){A=B;B=[]}if(B===n){B=[]}C=(C==="")?C:this.resolveId(C);if(!this.context.modules[C]||this.context.modules[C].createFn){var y=[],z=B.concat(C);for(;C=z.pop();){y.push([C,this])}this.loadModules(y,A);return n}return this.context.modules[C].exports};w.prototype.procesQueues=function(y,z){if(y._done){return}this.cleanScriptTag(y);this.procesModQueue(y,z)};w.prototype.procesModQueue=function(y){var z=this.context.modules,B,E,C,A;for(A=0;B=i[A];A++){if(f){y=B[3]}C=y._package;if(B[0]){E=this.resolveId(B[0],C)}else{E=y._moduleId}if(!z[E]){z[E]=new w(this.context,C,E,y.src)}if(z[E].creatorFn===null){z[E].define(B[1],B[2])}}i=[];if(c.length==0){var D=[];g(z,function(G,F){if(F.exports===null){if(F.deps.length>0){var H;for(A=0;H=F.deps[A];A++){if(!F.context.modules[H]){D.push([H,F])}}}}});if(D.length>0){this.loadModules(D,null)}}g(z,function(G,F){if((F.exports===null)&&(F.creatorFn!==null)){F.create()}})};w.prototype.create=function(){var A,y;if(this.exports!==null){return true}if(this.creatorFn===null){return false}for(y=0;A=this.deps[y];y++){var z=this.context.modules[A];if(z===n){return false}else{if(z.exports===null){if(!z.create()){return false}}}}this.exports={};o(this.exports,this.creatorFn.call(null,this.returnRequire(),this.exports,this.returnModule()));return true};w.prototype.returnRequire=function(){var y=this;return function(){return b.mpackage.require.apply(y,arguments)}};w.prototype.returnModule=function(){if(!this.module){this.module={id:this.id,uri:this.uri}}return this.module};w.prototype.define=function(z,y){this.deps=this.resolveIds(z);this.creatorFn=y};w.prototype.loadModules=function(A,z){var y,D,C,B;for(;y=A.pop();){D=this.resolveId(y[0],y[1]);if(!this.context.modules.hasOwnProperty(D)){B=this.resolveURI(D,y[1].parentPackage);this.context.modules[D]=new w(this.context,y[1].parentPackage,D,B);this.insertScriptTag(D,B+".js",y[1].parentPackage,this.procesQueues,this)}}};w.prototype.resolveIds=function(z){var y=[];d(z,function(A){y.push(this.resolveId(A))},this);return y};w.prototype.resolveId=function(D,C){var y,z;C=(C===n)?this.parentPackage:C;if(D.charAt(0)==="/"){D=D.split("/")}else{if(D.charAt(0)==="."){y=(this.id==="")?["",""]:this.id.split("/");y=y.slice(0,y.length-1);D=y.concat(D.split("/"))}else{y=(C.id==="")?[""]:C.id.split("/");D=y.concat(D.split("/"))}}for(var A=0;((z=D[A])!==n);A++){if(z==="."){D.splice(A,1);A-=1}else{if(z===".."){D.splice(A-1,2);A-=2}}}var B=D.join("/");return B};w.prototype.resolveRootPackage=function(A){var y,z;y=A.split("/");for(z=y.length;z>0;z--){y=y.slice(0,y.length-1);if(this.context.modules[y.join("/")] instanceof q){return this.context.modules[y.join("/")]}}return this.context.mpackage};w.prototype.resolveURI=function(B,A){var y,z;z=B.split("/")[1];B=(B.charAt(0)==="/")?B:"/"+B;A=(A===n)?this.parentPackage:A;y=(A.path[z])?A.path[z].split("/"):A.uri.split("/");y=y.slice(0,y.length-1);return y.join("/")+B};w.prototype.insertScriptTag=function(D,B,C,y,A){var z=x.createElement("script");z._moduleId=D;z._package=C;z._timer=setTimeout(this.scriptTimer(z,y,A),this.context.timeout);z.type="text/javascript";z.onload=z.onreadystatechange=this.scriptLoad(z,y,A);z.src=B;c.push(z);m.insertBefore(z,m.firstChild)};w.prototype.cleanScriptTag=function(y){y._done=true;y.onload=y.onreadystatechange=new Function("");if(y._timer){clearTimeout(y._timer)}d(c,function(A,z){if(y===A){c.splice(z,1)}})};w.prototype.scriptLoad=function(z,y,A){return function(){if(z._done||(typeof z.readyState!="undefined"&&z.readyState!="loaded")){return}y.call(A,z,true)}};w.prototype.scriptTimer=function(z,y,A){return function(){z._timer=0;y.call(A,z,false)}};function q(y,B,C,z,A){this.cfg=A;this.path={};B=(B===null)?this:B;w.call(this,y,B,C,z)}q.prototype=new w();q.prototype.loadPackageDef=function(y){y=(y)?y+".js":this.resolveURI("/package.js",this);this.insertScriptTag(this.id,y,this,this.procesQueues,this)};q.prototype.procesQueues=function(y,z){if(y._done){return}this.cleanScriptTag(y);this.procesPackageDefs(y);this.procesModQueue(y,z)};q.prototype.procesPackageDefs=function(y){var z;for(;z=s.pop();){if(f){y=z[1]}this.procesPackageCfg(y._package,z[0])}};q.prototype.procesPackageCfg=function(B,y){var A,z=this.context.modules;B.cfg=y,this.uri=(y.directories&&y.directories.lib)?this.resolveURI(y.directories.lib+"/",this):this.uri;A=(y.paths)?y.paths:{};g(A,function(D,C){B.path[D]=v(B.uri,C)},this);A=(y.mappings)?y.mappings:{};g(A,function(C,E){var D=E.location;C=this.resolveId(C,B);z[C]=new q(this.context,B,C,D,E);z[C].loadPackageDef()},this)};function u(D,C,B){var y=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg;var A=/require\(["']([\w-_\.\/]+)["']\)/g;if(typeof D!=="string"){B=C;C=D;D=null}if(!k(C)){B=C;C=[]}if(!name&&!C.length&&(typeof B==="function")){B.toString().replace(y,"").replace(A,function(E,F){C.push(F)})}var z=null;if(f){d(c,function(E){if(E.readyState==="interactive"){z=E;return false}})}i.push([D,C,B,z])}function h(y){var z=null;if(f){d(c,function(A){if(A.readyState==="interactive"){z=A;return false}})}s.push([y,z])}function e(A){var z=document.getElementsByTagName("script"),B,E,F,y,C,D={location:"",directories:{lib:"./lib"},waitSeconds:10000,baseUrlMatch:/apprequire\.js/i},A=(A)?A:D;o(A,D);b.timeout=A.waitSeconds;for(C=z.length-1;C>-1&&(B=z[C]);C--){E=B.getAttribute("data-main");F=B.src;if(F){y=F.match(A.baseUrlMatch);if(y){break}}}F=(E)?v(p.location.href,E):v(p.location.href,A.location);b.modules[""]=b.mpackage=new q(b,null,"",F,A);t();if(E){b.mpackage.loadPackageDef(E)}else{b.mpackage.procesPackageCfg(b.mpackage,A);if(A.main){p.require(A.main)}}}function t(){var y=p.require=b.mpackage.returnRequire();y.ensure=p.require;y["package"]=h;y.main=p.module=b.mpackage.returnModule();p.module.declare=u;p.module.context=b;p.define=u}if(typeof p.require!=="function"){e((typeof p.require!=="undefined")?p.require:{})}}).call(typeof window==="undefined"?this:window);