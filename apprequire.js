/**
 * AppRequire - http://code.tolsma.net/apprequire
 * Copyright(c) 2010-2011 Sander Tolsma/TTC
 * licensing@tolsma.net
 * http://code.tolsma.net/licenses
 */
var require,exports,module;if(typeof exports==="undefined"){exports={}}exports.boot=function(){var UNDEF,contextList=[],defaultcfg={directories:{lib:"./lib"},commonjsAPI:{},modules:{},debug:true,timeout:6000,baseUrlMatch:/apprequire/i},commonjsAPI={cml:"coreModuleLayer",contextPlugins:["genericPackage"],loader:"scriptLoader",loaderPlugins:["moduleTransport"],systemModules:["system"]},CJS_TYPE_CML="cml";function mixin(target,source,force){for(var prop in source){if(!(prop in target)||force){target[prop]=source[prop]}}}function cutLastTerm(uri){uri=uri.split("/");uri=uri.slice(0,uri.length-1);return uri.join("/")}function getLastTerm(uri){uri=uri.split("/");uri=uri.slice(uri.length-1);return uri[0]}function bootCommonJS(contextCfg){}function getContextConfig(document,baseUrlMatch){var scriptList,script,src,i,result;scriptList=document.getElementsByTagName("script");for(i=scriptList.length-1;i>-1&&(script=scriptList[i]);i--){src=script.src;if(src){if(src.match(baseUrlMatch)){result=script.getAttribute("data-context");break}}}if(result){if(JSON){result=JSON.parse(result)}else{result=!(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(result.replace(/"(\\.|[^"\\])*"/g,"")))&&eval("("+result+")")}}return result}function bootstrapReady(api,modules){for(var prop in api){if(!(api[prop] in modules)){return false}}return true}function addModule(id,dep,factoryFn,contextCfg){var modules=contextCfg.modules,commonjsAPI=contextCfg.commonjsAPI,context;if((typeof id=="string")&&(id!==UNDEF)){modules[id]={dep:dep,factoryFn:factoryFn};if(bootstrapReady(commonjsAPI,modules)){delete contextCfg.env.module.declare;context=modules.execute(commonjsAPI[CJS_TYPE_CML]);if(!context||!(context=context.create(contextCfg))){throw new Error("No correct CommonJS Module API declaration!!")}contextList.push(context)}}else{throw new Error("Invalid bootstrap module declaration!!")}}function bootExtraModuleEnvironment(contextCfg){contextCfg.modules.execute=function(id){var exports={};if(this[id]){mixin(exports,this[id].factoryFn.call(null,null,exports,null));return exports}else{throw new Error("(bootstrap.modules.execute) Module for given id doesnt exists!")}return UNDEF};contextCfg.env.module={declare:function(id,deb,factoryFn){addModule(id,deb,factoryFn,contextCfg)}}}function setupConfig(env,cfg){if(env===UNDEF){throw new Error("Invalid environment in setupConfig bootstrap! ")}mixin(cfg,defaultcfg);if(env.document!==UNDEF){mixin(cfg,getContextConfig(env.document,cfg.baseUrlMatch),true)}mixin(cfg,{location:""});if(cfg.location==""){cfg.location=cutLastTerm(env.location.href)}mixin(cfg.commonjsAPI,commonjsAPI);return cfg}function boot(env,commonjs){var contextCfg=setupConfig(env,{env:env});if(commonjs){return bootCommonJS(contextCfg)}else{return bootExtraModuleEnvironment(contextCfg)}}return boot}();if(typeof require!=="undefined"){exports.boot=exports.boot({location:{protocol:"memory:",href:"memory://apprequire/"},require:require,exports:exports,module:module},true)}else{exports.boot(window,false)}module.declare("coreModuleLayer",[],function(h,v,d){var o,k="_",l,e={},c=Object.prototype,t=true,f={toString:1},s,p="loader",a="INIT",b="READY";for(s in f){t=null}if(t){t=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}e.enumerables=t;e.apply=function(z,y,B){if(B){e.apply(z,B)}if(z&&y&&typeof y==="object"){var A,x,w;for(A in y){z[A]=y[A]}if(t){for(x=t.length;x--;){w=t[x];if(y.hasOwnProperty(w)){z[w]=y[w]}}}}return z};e.apply(e,{isEmpty:function(w,i){return(w===null)||(w===undefined)||((e.isArray(w)&&!w.length))||(!i?w==="":false)},isArray:function(i){return c.toString.apply(i)==="[object Array]"},isDate:function(i){return c.toString.apply(i)==="[object Date]"},isObject:function(i){return !!i&&!i.tagName&&c.toString.call(i)==="[object Object]"},isPrimitive:function(i){return e.isString(i)||e.isNumber(i)||e.isBoolean(i)},isFunction:function(i){return c.toString.apply(i)==="[object Function]"},isNumber:function(i){return c.toString.apply(i)==="[object Number]"&&isFinite(i)},isNumeric:function(i){return !isNaN(parseFloat(i))&&isFinite(i)},isString:function(i){return typeof i==="string"},isBoolean:function(i){return c.toString.apply(i)==="[object Boolean]"},isElement:function(i){return i?!!i.tagName:false},isDefined:function(i){return typeof i!=="undefined"},isIterable:function(i){if(!i){return false}if(e.isArray(i)||i.callee){return true}if(/NodeList|HTMLCollection/.test(c.toString.call(i))){return true}return((typeof i.nextNode!=="undefined"||i.item)&&e.isNumber(i.length))||false}});e.apply(e,{clone:function(A){if(!A){return A}if(A instanceof Date){return new Date(A.getTime())}var z,x,w,B,y;if(e.isArray(A)){z=A.length;B=new Array(z);while(z--){B[z]=e.clone(A[z])}}else{if(e.isObject(A)&&A.constructor===Object){B={};for(y in A){B[y]=e.clone(A[y])}if(t){for(x=t.length;x--;){w=t[x];B[w]=A[w]}}}}return B||A},merge:function(A,y,z){if(e.isString(y)){if(e.isObject(z)&&e.isObject(A[y])){if(z.constructor===Object){e.merge(A[y],z)}else{A[y]=z}}else{if(e.isObject(z)&&z.constructor!==Object){A[y]=z}else{A[y]=e.clone(z)}}return A}var x=1,w=arguments.length,B,C;for(;x<w;x++){B=arguments[x];for(C in B){if(B.hasOwnProperty(C)){e.merge(A,C,B[C])}}}return A},mixin:function(x,w,i){for(var y in w){if(!(y in x)||i){x[y]=w[y]}}},toArray:function(x,w,i){return Array.prototype.slice.call(x,w||0,i||x.length)},from:function(i){if(e.isIterable(i)){return e.toArray(i)}if(e.isDefined(i)&&i!==null){return[i]}return[]},flexSetter:function(i){return function(x,w){var y,z;if(x===null){return this}if(typeof x!=="string"){for(y in x){if(x.hasOwnProperty(y)){i.call(this,y,x[y])}}if(e.enumerables){for(z=e.enumerables.length;z--;){y=e.enumerables[z];if(x.hasOwnProperty(y)){i.call(this,y,x[y])}}}}else{i.call(this,x,w)}return this}},bind:function(z,y,w,i){var A=z,x;return function(){var B=w||arguments;if(i===true){B=Array.prototype.slice.call(arguments,0);B=B.concat(w)}else{if(e.isNumber(i)){B=Array.prototype.slice.call(arguments,0);x=[i,0].concat(w);Array.prototype.splice.apply(B,x)}}return A.apply(y||window,B)}},pass:function(x,i,w){if(i){i=e.from(i)}return function(){return x.apply(w,i.concat(e.toArray(arguments)))}}});e.apply(e,{classes:{},addClass:function(i,z,y){var x=e.classes,w=function(){};if((x[k+i])||!(x[k+z])){return false}y.$className=i;z=x[k+z];return x[k+i]=e.extend(z,y)},instantiate:function(){var z=e.toArray(arguments),y=z.shift(),x=function(){},i,A,w;i=e.classes[k+y];A=i.prototype.constructor;w=function(){return A.apply(this,z)};x.prototype=i.prototype;w.prototype=new x();w.prototype.constructor=w;return new w()},extend:function(G,F){var B=G,w=l,H=function(){},C,z,y,A,E,x,I=function(){return this.constructor.apply(this,arguments)},D;for(D in l){if(l.hasOwnProperty(D)){I[D]=l[D]}}if(typeof B==="function"&&B!==Object){C=B}else{C=w}H.prototype=C.prototype;I.prototype=new H();if(!("$class" in C)){for(z in w.prototype){if(!C.prototype[z]){C.prototype[z]=w.prototype[z]}}}I.prototype.self=I;if(F.hasOwnProperty("constructor")){I.prototype.constructor=I}else{I.prototype.constructor=C.prototype.constructor}I.superclass=I.prototype.superclass=C.prototype;I.extend(F);return I}});l=e.classes[k+"Base"]=function(){};l.prototype={$className:"Ext.Base",$class:l,self:l,constructor:function(){return this},callParent:function(w){var y=this.callParent.caller,x,i;if(!y.$owner){y=y.caller}x=y.$owner.superclass;i=y.$name;return x[i].apply(this,w||[])},callOverridden:function(i){var w=this.callOverridden.caller;return w.$previous.apply(this,i||[])}};e.apply(l,{ownMethod:function(i,x){var y,w;if(x===e.emptyFn){this.prototype[i]=x;return}if(x.$isOwned){y=x;x=function(){return y.apply(this,arguments)}}x.$owner=this;x.$name=i;x.$isOwned=true;this.prototype[i]=x},borrowMethod:function(i,w){if(!w.$isOwned){this.ownMethod(i,w)}else{this.prototype[i]=w}},extend:e.flexSetter(function(i,w){if(e.isObject(this.prototype[i])&&e.isObject(w)){e.merge(this.prototype[i],w)}else{if(e.isFunction(w)){this.ownMethod(i,w)}else{this.prototype[i]=w}}}),override:e.flexSetter(function(i,x){if(e.isObject(this.prototype[i])&&e.isObject(x)){e.merge(this.prototype[i],x)}else{if(e.isFunction(x)){if(e.isFunction(this.prototype[i])){var w=this.prototype[i];this.ownMethod(i,x);this.prototype[i].$previous=w}else{this.ownMethod(i,x)}}else{this.prototype[i]=x}}})});e.addClass("Store","Base",{constructor:function(){this.store={}},get:function(i){return this.store[k+i]},set:function(w,i){return this.store[k+w]=i},remove:function(w){var i=this.store[k+w];if(i!==o){delete this.store[k+w]}return i},exist:function(i){return(this.store[k+i]!==o)}});e.addClass("LoaderBase","Base",{constructor:function(){this.loaders=e.instantiate("Store")},addLoader:function(w,i){this.loaders.set(w,i)},load:function(B,x){var A,z,y,w;for(A=0;z=B[A];A++){y=this.getScheme(z.uri);if((w=this.loaders.get(y))===o){return false}w.load(z.uri+z.id,z.api,this.createLoadedCb(z,x))}},loaded:function(x,i,w){if(i!==o){i.call(null,x,w)}},createLoadedCb:function(y,w){var x=this;return function i(){x.loaded.call(x,y,w,arguments)}},getScheme:function(i){return"http"}});e.addClass("Context","Base",{constructor:function(i){var x=this;this.cfg=i;this.moduleSubs=e.instantiate("Store");this.loading=e.instantiate("Store");this.deferred=[];this.startupLoader(i);this.startupCMS(i);if(i.location&&i.main){this.provide("commonjs.org",i.main,function w(){x.moduleSubs.get("commonjs.org").cms.require(i.main)})}},startupCMS:function(w){var y=w.env,z=this,x;x=e.instantiate("CMS","commonjs.org");this.moduleSubs.set("commonjs.org",{cms:x,uri:w.location});x.provide=function B(D,C){z.provide(this.uid,D,C)};this.addSystemModules(x,w.commonjsAPI,w.modules);y.module.cms=x;y.require=function i(){return x.require.apply(x,arguments)};y.require.isMemoized=function A(){return x.isMemoized.apply(x,arguments)}},addSystemModules:function(y,w,x){var z,A;for(z=0;A=w.systemModules[z];z++){y.memoize(A,x[A].deps,x[A].factoryFn)}},startupLoader:function(x){var y=x.modules,w=x.commonjsAPI,z=x.env,i;i=y.execute(w[p]);if(!i||!(i=i.create(x))){throw new Error("No correct CommonJS Loader Layer declaration!!")}z.module.cfg=x;z.module.loaderBase=this.loaderBase=e.instantiate("LoaderBase");this.loaderBase.addLoader("http",i)},provide:function(y,B,w){var x,A,z=[];B=(typeof B=="string")?[B]:B;for(x=0;A=B[x];x++){A=this.getCMSId(y,A);if((!this.loading.exist(A.uri+A.id))&&(!A.cms.isMemoized(A.id))){A.api=this.createAPI(A.id,A.uid);this.loading.set(A.uri+A.id,A);z.push(A)}}if(z.length){this.loaderBase.load(z,this.provideCallback(z,w))}else{w.call(null)}},provideCallback:function(C,w){var z,y,A=this,B=[];for(z=0;y=C[z];z++){B.push(y.uri+y.id)}return function x(G,D){var F,E;A.loading.remove(G.uri+G.id);for(F=0;E=B[F];F++){if(E==G.uri+G.id){break}}if(E!==o){B.splice(F,1);if(B.length==0){w.call(null,D)}}else{throw new Error("Wrong resource returned for this callback!! (context.provideCallback)")}}},getCMSId:function(w,x){var i=this.moduleSubs.get(w);return{cms:i.cms,uid:w,uri:i.uri,id:x}},createAPI:function(w,i){var i=this.moduleSubs.get(i).cms;return{cmsuri:i.uri,deps:[],memoize:function y(C,B,A){if(C===null){C=w}if(B===o){B=[]}for(var z=0;B[z];z++){B[z]=i.resolveId(C,B[z]);this.deps.push(B[z])}i.memoize(C,B,A)},loadReady:function x(z){i.provide(this.deps,z);this.deps=[]}}}});e.addClass("CMS","Base",{constructor:function(i){this.uid=i;this.store=e.instantiate("Store")},require:function u(w){var i;if(i=this.store.get(w)){return i.createModule()}return o},memoize:function m(x,w,i){if(!this.store.exist(x)){this.store.set(x,e.instantiate("Module",x,w,i,this));return true}return false},isMemoized:function g(i){return this.store.exist(i)},provide:function r(w,i){return false},getMain:function q(i){return this.require("")},id:function j(i){return i},resolveId:function n(y,A){if(A.charAt(0)==="."){A=y+"/"+A;var z=A.split("/");var w=[];var x;if(A.charAt(A.length-1)==="/"){z.push("INDEX")}for(x=0;x<z.length;x++){if(z[x]=="."||!z[x].length){w.pop();continue}if(z[x]==".."){if(!w.length){throw new Error("Invalid module path: "+path)}w.pop();w.pop();continue}w.push(z[x])}A=w.join("/")}return A}});e.addClass("Module","Base",{constructor:function(y,x,w,i){this.id=y;this.deps=x;this.factoryFn=w;this.cms=i;this.exports={};this.module=null;this.state=a},require:function(w){w=(w==="")?w:this.cms.resolveId(this.id,w);var i=this.cms.require(w);if(!i){throw"Module: "+w+" doesn't exist!!"}return i},ensure:function(z,w){var y=[];if(z===o){z=[]}for(var x=0;z[x];x++){y.push(this.cms.resolveId(this.id,z[x]))}this.cms.provide(y,w);return o},createModule:function(){if(this.state===a){this.state=b;e.mixin(this.exports,this.factoryFn.call(null,this.returnRequire(),this.exports,this.returnModule()))}return(this.state===b)?this.exports:null},returnRequire:function(){var w=this,i=function(){return w.require.apply(w,arguments)};i.ensure=function(){return w.ensure.apply(w,arguments)};return i},returnModule:function(){if(!this.module){this.module={id:this.cms.id(this.id),}}return this.module}});v.create=function(i){i.system=e;return e.instantiate("Context",i)}});module.declare("genericPackage",[],function(b,d,a){var i;var e={};function h(k){if((k.length>0)&&(k.charAt(k.length-1)!=="/")){k=k+"/"}return e[objEscStr+k]}function g(l,k){if((l.length>0)&&(l.charAt(l.length-1)!=="/")){l=l+"/"}return e[objEscStr+l]=k}function j(l,k){if(!k){k=""}if(h(k+getFirstTerm(l)+"/")){k=k+getFirstTerm(l)+"/";l=cutFirstTerm(l);return j(l,k)}return{URI:h(k)+l,id:l}}function f(k){var l;if(k.uid&&k.uid!==this.uid){this.uid=k.uid;setPackage(k.uid,this)}this.mainId=(k.main)?this.uid+packageDelimiter+k.main:null;if(this.mainId){addDefer(this.mainId,this.startUp,this)}this.moduleUri=(k.directories&&k.directories.lib)?resolveUri(this.uri,k.directories.lib):resolveUri(this.uri,"lib");iterate(k.paths,function(n,m){this.setPath(n,resolvePath(this.moduleUri,m))},this);this.createMappings(k.mappings);return this}function c(k){iterate(k,function(m,n){var l={};l.uri=(n.location)?resolvePath(this.uri,n.location):"";l.uid=(n.uid)?n.uid:l.uri;this.setMapping(m,l);if(!getPackage(l.uid)){if(l.uri===""){throw"No mapping location for package: "+this.uid+" and mapping: "+m}(new Package(l.uid,l.uri)).loadPackageDef()}},this)}d.commonjs={create:function(k){}}});module.declare("scriptLoader",[],function(c,b,d){var e;function a(j){var i=Object.prototype.toString;return i.apply(j)==="[object Array]"}function h(j,i){return j===null||j===undefined||((a(j)&&!j.length))||(!i?j==="":false)}function f(n,m,l){if(h(n,true)){return}for(var k=0,j=n.length;k<j;k++){if(m.call(l||n[k],n[k],k,n)===false){return k}}}function g(k){var j,o,n,l=k.modules;this.env=k.env;this.testInteractive=!!k.env.ActiveXObject;this.timeout=k.timeout;this.scripts=[];this.transports=[];if((j=k.commonjsAPI.loaderPlugins)!==e){for(var m=0;o=j[m];m++){n=l.execute(o);if(!n||!(n=n.create(k,this))){throw new Error("No correct CommonJS loaderPlugin: "+o+" declaration!!")}this.transports.push(n)}}}g.prototype={load:function(k,j,i){if(i===e){return false}k+=".js";this.callTransports("initEnv",[this.env,k,j]);this.insertScriptTag(k,[k,j,i],this.ready,this);return true},ready:function(j,k,l){var i;if(k._done){throw new error("2nd time script ready call!!");return}this.cleanScriptTag(k);j.push(l);this.callTransports("loadReady",j)},getActiveURI:function(){var k,j;if(this.testInteractive){for(k=0;j=this.scripts[k];k++){if(j.readyState==="interactive"){return j._moduleURI}}}return e},callTransports:function(n,m){var j=this.transports.length,k,l;for(k=0;l=this.transports[k];k++){if(l[n]==e){throw new error("Transport plugin: "+l.name+" doesn't have function: "+n)}else{l[n].apply(l,m)}}},insertScriptTag:function(n,k,j,m){var o=this.env.document,i=o.getElementsByTagName("head")[0]||o.getElementsByTagName("body")[0],l=o.createElement("script");l._moduleURI=n;l._timer=setTimeout(this.scriptTimer(l,k,j,m),this.timeout);l.type="text/javascript";l.onload=l.onreadystatechange=this.scriptLoad(l,k,j,m);l.onerror=this.scriptError(l,k,j,m);l.src=n;this.scripts.push(l);i.insertBefore(l,i.firstChild)},cleanScriptTag:function(i){i._done=true;delete i._moduleURI;i.onload=i.onreadystatechange=new Function("");i.onerror=new Function("");if(i._timer){clearTimeout(i._timer)}f(this.scripts,function(k,j){if(i===k){this.scripts.splice(j,1)}},this)},scriptLoad:function(k,j,i,l){return function(){if(k._done||(typeof k.readyState!="undefined"&&!((k.readyState=="loaded")||(k.readyState=="complete")))){return}i.call(l,j,k,true)}},scriptError:function(k,j,i,l){return function(){i.call(l,j,k,false)}},scriptTimer:function(k,j,i,l){return function(){k._timer=0;i.call(l,j,k,false)}}};b.create=function(i){return new g(i)}});module.declare("moduleTransport",[],function(c,b,d){var e,h="_";function a(j){var i=Object.prototype.toString;return i.apply(j)==="[object Array]"}function g(){this.store={}}g.prototype={get:function(i){return this.store[h+i]},set:function(j,i){return this.store[h+j]=i},remove:function(j){var i=this.store[h+j];if(i!==e){delete this.store[h+j]}return i},exist:function(i){return(this.store[h+i]!==e)}};function f(i,j){this.defQueue=[];this.parent=j;this.apiStore=new g()}f.prototype={name:"moduleTransport",initEnv:function(j,l,i){var k=this;this.apiStore.set(l,i);if(!j.module){j.module={}}j.module.declare=function m(){k.declare.apply(k,arguments)}},loadReady:function(l,p,m,j){var k,n,o,r,q=[];for(n=0;k=this.defQueue[n];n++){if(k[3]!==e){o=k[3]}else{o=l}r=this.apiStore.get(o);r.memoize(k[0],k[1],k[2])}this.defQueue=[];p.loadReady(m);this.apiStore.remove(l)},declare:function(n,m,k){var i=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg;var l=/require\(["']([\w-_\.\/]+)["']\)/g;var j;if(typeof n!=="string"){k=m;m=n;n=null}if(!a(m)){k=m;m=[]}if(!name&&!m.length&&(typeof k==="function")){k.toString().replace(i,"").replace(l,function(o,p){m.push(p)})}j=this.parent.getActiveURI();this.defQueue.push([n,m,k,j])}};b.create=function(i,j){return new f(i,j)}});module.declare("system",[],function(b,a,d){var e=(typeof importScripts==="function");function c(i,h,f){if(e){postMessage([i,h,f])}else{var g=window;if(window.parent&&window.parent[i]){g=window.parent}if(g[i]){g[i](h,f)}}}a.stdio={print:function(f,g){c("printResults",f,g)}}});module.declare("test",["system"],function(b,a,c){var d=b("system");a.print=function(){var e=d.stdio;e.print.apply(e,arguments)};a.assert=function(f,e){if(f){a.print("PASS "+e,"pass")}else{a.print("FAIL "+e,"fail")}}});
