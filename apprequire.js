(function(){var q=this,o,k=Object.prototype.toString,x=q.document,n=x.getElementsByTagName("head")[0]||x.getElementsByTagName("body")[0],g=!!q.ActiveXObject,b={mpackage:null,modules:{},timeout:6000},d=[],j=[],t=[];function l(y){return k.apply(y)==="[object Array]"}function m(z,y){return z===null||z===undefined||((l(z)&&!z.length))||(!y?z==="":false)}function e(C,B,A){if(m(C,true)){return}for(var z=0,y=C.length;z<y;z++){if(B.call(A||C[z],C[z],z,C)===false){return z}}}function h(A,z,y){if(m(A)){return}if(l(A)||A.callee){e(A,z,y);return}else{if(typeof A=="object"){for(var B in A){if(A.hasOwnProperty(B)){if(z.call(y||A,B,A[B],A)===false){return}}}}}}function p(A,z,y){for(var B in z){if(!(B in A)||y){A[B]=z[B]}}}function c(C,D){if((D.charAt(D.length-1)==="/")&&(D.length>1)){D=D.substr(0,D.length-1)}var y=s(C),z,A;if(D.charAt(0)==="/"){return a(y,D)}z=s(D);z.directory="";if(a(z,"")!==""){return D}z=(y.path==="")?[]:y.path.split("/");z=z.concat(D.split("/"));for(var B=0;((A=z[B])!==o);B++){if((A===".")||((A==="")&&(B>0))){z.splice(B,1);B-=1}else{if(A===".."){z.splice(B-1,2);B-=2;if(B<0){return a(y,"")}}}}return a(y,z.join("/"))}function s(C){var B={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},y=B.parser.strict.exec(C),A={},z=14;while(z--){A[B.key[z]]=y[z]||""}A[B.q.name]={};A[B.key[12]].replace(B.q.parser,function(E,D,F){if(D){A[B.q.name][D]=F}});return A}function a(y,A){var z;z=((y.protocol)?(y.protocol+"://"):"");z=z+((y.authority)?y.authority:"");return z+((A)?A:((y.directory)?y.directory:""))}function w(y,A,B,z){this.context=y;this.parentPackage=A;this.id=B;this.uri=z;this.exports=null;this.creatorFn=null;this.module=null;this.deps=[]}w.prototype.require=function(C,B,A){if(l(C)){A=B;B=C;C=""}if(typeof B==="function"){A=B;B=[]}if(B===o){B=[]}C=(C==="")?C:this.resolveId(C);if(!this.context.modules[C]||this.context.modules[C].createFn){var y=[],z=B.concat(C);for(;C=z.pop();){y.push([C,this])}this.loadModules(y,A);return o}return this.context.modules[C].exports};w.prototype.procesQueues=function(y,z){if(y._done){return}this.cleanScriptTag(y);this.procesModQueue(y,z)};w.prototype.procesModQueue=function(y){var z=this.context.modules,B,E,C,A;for(A=0;B=j[A];A++){if(g){y=B[3]}C=y._package;if(B[0]){E=this.resolveId(B[0],C)}else{E=y._moduleId}if(!z[E]){z[E]=new w(this.context,C,E,y.src)}if(z[E].creatorFn===null){z[E].define(B[1],B[2])}}j=[];if(d.length==0){var D=[];h(z,function(G,F){if(F.exports===null){if(F.deps.length>0){var H;for(A=0;H=F.deps[A];A++){if(!F.context.modules[H]){D.push([H,F])}}}}});if(D.length>0){this.loadModules(D,null)}}h(z,function(G,F){if((F.exports===null)&&(F.creatorFn!==null)){F.create()}})};w.prototype.create=function(){var A,y;if(this.exports!==null){return true}if(this.creatorFn===null){return false}for(y=0;A=this.deps[y];y++){var z=this.context.modules[A];if(z===o){return false}else{if(z.exports===null){if(!z.create()){return false}}}}this.exports={};p(this.exports,this.creatorFn.call(null,this.returnRequire(),this.exports,this.returnModule()));return true};w.prototype.returnRequire=function(){var y=this;return function(){return b.mpackage.require.apply(y,arguments)}};w.prototype.returnModule=function(){if(!this.module){this.module={id:this.id,uri:this.uri}}return this.module};w.prototype.define=function(z,y){this.deps=this.resolveIds(z);this.creatorFn=y};w.prototype.loadModules=function(A,z){var y,D,C,B;for(;y=A.pop();){D=this.resolveId(y[0],y[1]);if(!this.context.modules.hasOwnProperty(D)){B=this.resolveURI(D,y[1].parentPackage);this.context.modules[D]=new w(this.context,y[1].parentPackage,D,B);this.insertScriptTag(D,B+".js",y[1].parentPackage,this.procesQueues,this)}}};w.prototype.resolveIds=function(z){var y=[];e(z,function(A){y.push(this.resolveId(A))},this);return y};w.prototype.resolveId=function(D,C){var y,z;C=(C===o)?this.parentPackage:C;if(D.charAt(0)==="/"){D=D.split("/")}else{if(D.charAt(0)==="."){y=(this.id==="")?["",""]:this.id.split("/");y=y.slice(0,y.length-1);D=y.concat(D.split("/"))}else{y=(C.id==="")?[""]:C.id.split("/");D=y.concat(D.split("/"))}}for(var A=0;((z=D[A])!==o);A++){if(z==="."){D.splice(A,1);A-=1}else{if(z===".."){D.splice(A-1,2);A-=2}}}var B=D.join("/");return B};w.prototype.resolveRootPackage=function(A){var y,z;y=A.split("/");for(z=y.length;z>0;z--){y=y.slice(0,y.length-1);if(this.context.modules[y.join("/")] instanceof r){return this.context.modules[y.join("/")]}}return this.context.mpackage};w.prototype.resolveURI=function(B,A){var y,z;z=B.split("/")[1];B=(B.charAt(0)==="/")?B:"/"+B;A=(A===o)?this.parentPackage:A;y=(A.path[z])?A.path[z].split("/"):A.uri.split("/");y=y.slice(0,y.length-1);return y.join("/")+B};w.prototype.insertScriptTag=function(D,B,C,y,A){var z=x.createElement("script");z._moduleId=D;z._package=C;z._timer=setTimeout(this.scriptTimer(z,y,A),this.context.timeout);z.type="text/javascript";z.onload=z.onreadystatechange=this.scriptLoad(z,y,A);z.src=B;d.push(z);n.insertBefore(z,n.firstChild)};w.prototype.cleanScriptTag=function(y){y._done=true;y.onload=y.onreadystatechange=new Function("");if(y._timer){clearTimeout(y._timer)}e(d,function(A,z){if(y===A){d.splice(z,1)}})};w.prototype.scriptLoad=function(z,y,A){return function(){if(z._done||(typeof z.readyState!="undefined"&&z.readyState!="loaded")){return}y.call(A,z,true)}};w.prototype.scriptTimer=function(z,y,A){return function(){z._timer=0;y.call(A,z,false)}};function r(y,B,C,z,A){this.cfg=A;this.path={};B=(B===null)?this:B;w.call(this,y,B,C,z)}r.prototype=new w();r.prototype.loadPackageDef=function(y){y=(y)?y+".js":this.resolveURI("/package.js",this);this.insertScriptTag(this.id,y,this,this.procesQueues,this)};r.prototype.procesQueues=function(y,z){if(y._done){return}this.cleanScriptTag(y);this.procesPackageDefs(y);this.procesModQueue(y,z)};r.prototype.procesPackageDefs=function(y){var z;for(;z=t.pop();){if(g){y=z[1]}this.procesPackageCfg(y._package,z[0])}};r.prototype.procesPackageCfg=function(B,y){var A,z=this.context.modules;B.cfg=y,this.uri=(y.directories&&y.directories.lib)?this.resolveURI(y.directories.lib+"/",this):this.uri;A=(y.paths)?y.paths:{};h(A,function(D,C){B.path[D]=resolveURI(B.uri,C)},this);A=(y.mappings)?y.mappings:{};h(A,function(C,E){var D=E.location;C=this.resolveId(C,B);z[C]=new r(this.context,B,C,D,E);z[C].loadPackageDef()},this)};function v(D,C,B){var y=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg;var A=/require\(["']([\w-_\.\/]+)["']\)/g;if(typeof D!=="string"){B=C;C=D;D=null}if(!l(C)){B=C;C=[]}if(!name&&!C.length&&(typeof B==="function")){B.toString().replace(y,"").replace(A,function(E,F){C.push(F)})}var z=null;if(g){e(d,function(E){if(E.readyState==="interactive"){z=E;return false}})}j.push([D,C,B,z])}function i(y){var z=null;if(g){e(d,function(A){if(A.readyState==="interactive"){z=A;return false}})}t.push([y,z])}function f(A){var z=document.getElementsByTagName("script"),B,E,F,y,C,D={location:"",directories:{lib:"./lib"},waitSeconds:10000,baseUrlMatch:/apprequire\.js/i},A=(A)?A:D;p(A,D);b.timeout=A.waitSeconds;for(C=z.length-1;C>-1&&(B=z[C]);C--){E=B.getAttribute("data-main");F=B.src;if(F){y=F.match(A.baseUrlMatch);if(y){break}}}F=(E)?c(q.location.href,E):c(q.location.href,A.location);b.modules[""]=b.mpackage=new r(b,null,"",F,A);u();if(E){b.mpackage.loadPackageDef(E)}else{b.mpackage.procesPackageCfg(b.mpackage,A);if(A.main){q.require(A.main)}}}function u(){var y=q.require=b.mpackage.returnRequire();y.ensure=q.require;y["package"]=i;y.main=q.module=b.mpackage.returnModule();q.module.declare=v;q.module.context=b;q.define=v}if(typeof q.require!=="function"){f((typeof q.require!=="undefined")?q.require:{})}}).call(typeof window==="undefined"?this:window);