/**
 * AppRequire - http://code.tolsma.net/apprequire
 * Copyright(c) 2010-2011 Sander Tolsma/TTC
 * licensing@tolsma.net
 * http://code.tolsma.net/licenses
 */
var require,exports,module,window;(function(env){var UNDEF,defaultcfg={directories:{lib:"./lib"},location:"./",commonjsAPI:{},modules:{},debug:true,timeout:6000,baseUrlMatch:/apprequire/i},commonjsAPI={loader:"scriptLoader",loaderPlugins:["moduleTransport"],systemModules:["system","test"]},system;function mixin(target,source,force){for(var prop in source){if(!(prop in target)||force){target[prop]=source[prop]}}}function isArray(value){return Object.prototype.toString.apply(value)==="[object Array]"}function cutLastTerm(uri){uri=uri.split("/");uri=uri.slice(0,uri.length-1);return uri.join("/")}function getContextConfig(document,baseUrlMatch){var scriptList,script,src,i,result;scriptList=document.getElementsByTagName("script");for(i=scriptList.length-1;i>-1&&(script=scriptList[i]);i--){src=script.src;if(src){if(src.match(baseUrlMatch)){result=script.getAttribute("data-context");break}}}if(result){if(JSON){result=JSON.parse(result)}else{result=!(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(result.replace(/"(\\.|[^"\\])*"/g,"")))&&eval("("+result+")")}}return result}function bootstrapReady(api,modules){for(var prop in api){if(isArray(api[prop])){if(!bootstrapReady(api[prop],modules)){return false}}else{if(!(api[prop] in modules)){return false}}}return true}function addModule(id,dep,factoryFn,contextCfg){var modules=contextCfg.modules,commonjsAPI=contextCfg.commonjsAPI,context;if((typeof id=="string")&&(id!==UNDEF)){modules[id]={dep:dep,factoryFn:factoryFn};if(bootstrapReady(commonjsAPI,modules)){delete contextCfg.env.module.declare;delete contextCfg.env.module.addClass;context=system.instantiate("Context",contextCfg);if(contextCfg.debug){contextCfg.env.module.debug={system:system,context:context,cfg:contextCfg}}}}else{throw new Error("Invalid bootstrap module declaration!!")}}function bootExtraModuleEnvironment(contextCfg){contextCfg.modules.execute=function(id){var exports={};if(this[id]){mixin(exports,this[id].factoryFn.call(null,null,exports,null));return exports}else{throw new Error("(bootstrap.modules.execute) Module for given id doesnt exists!")}return UNDEF};contextCfg.env.module={declare:function(id,deb,factoryFn){addModule(id,deb,factoryFn,contextCfg)},addClass:function(cls){if(cls.name=="System"){system=cls.system}else{cls.addClass(system)}}}}function setupConfig(env,cfg){if(env===UNDEF){throw new Error("Invalid environment in setupConfig bootstrap! ")}mixin(cfg,defaultcfg);if(env.document!==UNDEF){mixin(cfg,getContextConfig(env.document,cfg.baseUrlMatch),true)}mixin(cfg,{location:""});if(cfg.location==""){cfg.location=cutLastTerm(env.location.href)}mixin(cfg.commonjsAPI,commonjsAPI);return cfg}bootExtraModuleEnvironment(setupConfig(env,{env:env}))})(window);(function(){var f,h="_",e,g={},a=Object.prototype,b=true,d={toString:1},c;for(c in d){b=null}if(b){b=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}g.enumerables=b;g.apply=function(o,n,q){if(q){g.apply(o,q)}if(o&&n&&typeof n==="object"){var p,m,l;for(p in n){o[p]=n[p]}if(b){for(m=b.length;m--;){l=b[m];if(n.hasOwnProperty(l)){o[l]=n[l]}}}}return o};g.apply(g,{isEmpty:function(j,i){return(j===null)||(j===undefined)||((g.isArray(j)&&!j.length))||(!i?j==="":false)},isArray:function(i){return a.toString.apply(i)==="[object Array]"},isDate:function(i){return a.toString.apply(i)==="[object Date]"},isObject:function(i){return !!i&&!i.tagName&&a.toString.call(i)==="[object Object]"},isPrimitive:function(i){return g.isString(i)||g.isNumber(i)||g.isBoolean(i)},isFunction:function(i){return a.toString.apply(i)==="[object Function]"},isNumber:function(i){return a.toString.apply(i)==="[object Number]"&&isFinite(i)},isNumeric:function(i){return !isNaN(parseFloat(i))&&isFinite(i)},isString:function(i){return typeof i==="string"},isBoolean:function(i){return a.toString.apply(i)==="[object Boolean]"},isElement:function(i){return i?!!i.tagName:false},isDefined:function(i){return typeof i!=="undefined"},isIterable:function(i){if(!i){return false}if(g.isArray(i)||i.callee){return true}if(/NodeList|HTMLCollection/.test(a.toString.call(i))){return true}return((typeof i.nextNode!=="undefined"||i.item)&&g.isNumber(i.length))||false}});g.apply(g,{clone:function(p){if(!p){return p}if(p instanceof Date){return new Date(p.getTime())}var o,m,l,q,n;if(g.isArray(p)){o=p.length;q=new Array(o);while(o--){q[o]=g.clone(p[o])}}else{if(g.isObject(p)&&p.constructor===Object){q={};for(n in p){q[n]=g.clone(p[n])}if(b){for(m=b.length;m--;){l=b[m];q[l]=p[l]}}}}return q||p},merge:function(n,l,m){if(g.isString(l)){if(g.isObject(m)&&g.isObject(n[l])){if(m.constructor===Object){g.merge(n[l],m)}else{n[l]=m}}else{if(g.isObject(m)&&m.constructor!==Object){n[l]=m}else{n[l]=g.clone(m)}}return n}var k=1,j=arguments.length,o,p;for(;k<j;k++){o=arguments[k];for(p in o){if(o.hasOwnProperty(p)){g.merge(n,p,o[p])}}}return n},mixin:function(k,j,i){for(var l in j){if(!(l in k)||i){k[l]=j[l]}}},toArray:function(k,j,i){return Array.prototype.slice.call(k,j||0,i||k.length)},from:function(i){if(g.isIterable(i)){return g.toArray(i)}if(g.isDefined(i)&&i!==null){return[i]}return[]},flexSetter:function(i){return function(l,j){var m,n;if(l===null){return this}if(typeof l!=="string"){for(m in l){if(l.hasOwnProperty(m)){i.call(this,m,l[m])}}if(g.enumerables){for(n=g.enumerables.length;n--;){m=g.enumerables[n];if(l.hasOwnProperty(m)){i.call(this,m,l[m])}}}}else{i.call(this,l,j)}return this}},bind:function(m,l,j,i){var n=m,k;return function(){var o=j||arguments;if(i===true){o=Array.prototype.slice.call(arguments,0);o=o.concat(j)}else{if(g.isNumber(i)){o=Array.prototype.slice.call(arguments,0);k=[i,0].concat(j);Array.prototype.splice.apply(o,k)}}return n.apply(l||window,o)}},pass:function(k,i,j){if(i){i=g.from(i)}return function(){return k.apply(j,i.concat(g.toArray(arguments)))}}});g.apply(g,{classes:{},addClass:function(i,m,l){var k=g.classes,j=function(){};if(!g.isString(m)){l=m;m="Base"}if((k[h+i])||!(k[h+m])){return false}l.$className=i;m=k[h+m];return k[h+i]=g.extend(m,l)},instantiate:function(){var m=g.toArray(arguments),l=m.shift(),k=function(){},i,n,j;i=g.classes[h+l];n=i.prototype.constructor;j=function(){return n.apply(this,m)};k.prototype=i.prototype;j.prototype=new k();j.prototype.constructor=j;return new j()},extend:function(u,t){var p=u,j=e,v=function(){},q,n,m,o,s,l,w=function(){return this.constructor.apply(this,arguments)},r;for(r in e){if(e.hasOwnProperty(r)){w[r]=e[r]}}if(typeof p==="function"&&p!==Object){q=p}else{q=j}v.prototype=q.prototype;w.prototype=new v();if(!("$class" in q)){for(n in j.prototype){if(!q.prototype[n]){q.prototype[n]=j.prototype[n]}}}w.prototype.self=w;if(t.hasOwnProperty("constructor")){w.prototype.constructor=w}else{w.prototype.constructor=q.prototype.constructor}w.superclass=w.prototype.superclass=q.prototype;w.extend(t);return w}});e=g.classes[h+"Base"]=function(){};e.prototype={$className:"Ext.Base",$class:e,self:e,constructor:function(){return this},callParent:function(j){var l=this.callParent.caller,k,i;if(!l.$owner){l=l.caller}k=l.$owner.superclass;i=l.$name;return k[i].apply(this,j||[])},callOverridden:function(i){var j=this.callOverridden.caller;return j.$previous.apply(this,i||[])}};g.apply(e,{ownMethod:function(i,k){var l,j;if(k===g.emptyFn){this.prototype[i]=k;return}if(k.$isOwned){l=k;k=function(){return l.apply(this,arguments)}}k.$owner=this;k.$name=i;k.$isOwned=true;this.prototype[i]=k},borrowMethod:function(i,j){if(!j.$isOwned){this.ownMethod(i,j)}else{this.prototype[i]=j}},extend:g.flexSetter(function(i,j){if(g.isObject(this.prototype[i])&&g.isObject(j)){g.merge(this.prototype[i],j)}else{if(g.isFunction(j)){this.ownMethod(i,j)}else{this.prototype[i]=j}}}),override:g.flexSetter(function(i,k){if(g.isObject(this.prototype[i])&&g.isObject(k)){g.merge(this.prototype[i],k)}else{if(g.isFunction(k)){if(g.isFunction(this.prototype[i])){var j=this.prototype[i];this.ownMethod(i,k);this.prototype[i].$previous=j}else{this.ownMethod(i,k)}}else{this.prototype[i]=k}}})});if(module.addClass!==f){module.addClass({name:"System",system:g})}else{if(exports!==f){exports.system=g}}})();(function(){var a,b,e="_",d={constructor:function(){this.store={}},get:function(f){return this.store[e+f]},set:function(g,f){return this.store[e+g]=f},remove:function(g){var f=this.store[e+g];if(f){delete this.store[e+g]}return f},exist:function(f){return this.store[e+f]!==a}};function c(f){b=f;b.addClass("Store",d)}if(module.addClass!==a){module.addClass({name:"Store",addClass:c})}else{if(exports!==a){exports.addClass=c}}})();(function(){var d,e,b="INIT",c="READY",a={constructor:function(j,i,h,g){this.id=j;this.deps=i;this.factoryFn=h;this.cms=g;this.exports={};this.module=null;this.state=b},require:function(h){h=(h==="")?h:this.cms.resolveId(this.id,h);var g=this.cms.require(h);if(!g){throw"Module: "+h+" doesn't exist!!"}return g},ensure:function(k,g){var j=[];if(k===d){k=[]}for(var h=0;k[h];h++){j.push(this.cms.resolveId(this.id,k[h]))}this.cms.provide(j,g);return d},createModule:function(){if(this.state===b){this.state=c;e.mixin(this.exports,this.factoryFn.call(null,this.returnRequire(),this.exports,this.returnModule()))}return(this.state===c)?this.exports:null},returnRequire:function(){var h=this,g=function(){return h.require.apply(h,arguments)};g.ensure=function(){return h.ensure.apply(h,arguments)};return g},returnModule:function(){if(!this.module){this.module={id:this.cms.id(this.id),}}return this.module}};function f(g){e=g;e.addClass("Module",a)}if(module.addClass!==d){module.addClass({name:"Module",addClass:f})}else{if(exports!==d){exports.addClass=f}}})();(function(){var k,b,e={constructor:function(l){this.uid=l;this.store=b.instantiate("Store")},require:function d(m){var l;if(l=this.store.get(m)){return l.createModule()}return k},memoize:function j(n,m,l){if(!this.store.exist(n)){this.store.set(n,b.instantiate("Module",n,m,l,this));return true}return false},isMemoized:function h(l){return this.store.exist(l)},provide:function a(m,l){return false},getMain:function f(l){return this.require("")},id:function c(l){return l},resolveId:function i(n,p){if(p.charAt(0)==="."){p=n+"/"+p;var o=p.split("/");var l=[];var m;if(p.charAt(p.length-1)==="/"){o.push("INDEX")}for(m=0;m<o.length;m++){if(o[m]=="."||!o[m].length){l.pop();continue}if(o[m]==".."){if(!l.length){throw new Error("Invalid module path: "+path)}l.pop();l.pop();continue}l.push(o[m])}p=l.join("/")}return p}};function g(l){b=l;b.addClass("ModuleSystem",e)}if(module.addClass!==k){module.addClass({name:"ModuleSystem",addClass:g})}else{if(exports!==k){exports.addClass=g}}})();(function(){var b,c,a="loader",e={constructor:function(f){var h=this;h.cfg=f;h.moduleSubs=c.instantiate("Store");h.loading=c.instantiate("Store");h.startupLoader(f);h.startupCMS(f);if(f.location&&f.main){h.provide("commonjs.org",f.main,function g(){h.moduleSubs.get("commonjs.org").ms.require(f.main)})}},startupCMS:function(g){var i=g.env,j=this,h;h=c.instantiate("ModuleSystem","commonjs.org");this.moduleSubs.set("commonjs.org",{ms:h,uri:g.location});h.provide=function k(m,l){j.provide(this.uid,m,l)};this.addSystemModules(h,g.commonjsAPI,g.modules);i.require=function f(){return h.require.apply(h,arguments)}},addSystemModules:function(h,f,g){var j,k;for(j=0;k=f.systemModules[j];j++){h.memoize(k,g[k].deps,g[k].factoryFn)}},startupLoader:function(h){var i=h.modules,g=h.commonjsAPI,f;f=i.execute(g[a]);if(!f||!(f=f.create(h))){throw new Error("No correct CommonJS Loader Layer declaration!!")}this.loaderBase=c.instantiate("LoaderBase");this.loaderBase.addLoader("http",f)},provide:function(h,l,f){var g,k,j=[];l=(typeof l=="string")?[l]:l;for(g=0;k=l[g];g++){k=this.getMSId(h,k);if((!this.loading.exist(k.uri+k.id))&&(!k.ms.isMemoized(k.id))){k.api=this.createAPI(k.id,k.uid);this.loading.set(k.uri+k.id,k);j.push(k)}}if(j.length){this.loaderBase.load(j,this.provideCallback(j,f))}else{f.call(null)}},provideCallback:function(m,f){var j,h,k=this,l=[];for(j=0;h=m[j];j++){l.push(h.uri+h.id)}return function g(q,n){var p,o;k.loading.remove(q.uri+q.id);for(p=0;o=l[p];p++){if(o==q.uri+q.id){break}}if(o!==b){l.splice(p,1);if(l.length==0){f.call(null,n)}}else{throw new Error("Wrong resource returned for this callback!! (context.provideCallback)")}}},getMS:function(){},setMS:function(){},getMSId:function(g,h){var f=this.moduleSubs.get(g);return{ms:f.ms,uid:g,uri:f.uri,id:h}},createAPI:function(i,f){var f=this.moduleSubs.get(f).ms;return{msuri:f.uri,deps:[],memoize:function h(m,l,k){if(m===null){m=i}if(l===b){l=[]}for(var j=0;l[j];j++){l[j]=f.resolveId(m,l[j]);this.deps.push(l[j])}f.memoize(m,l,k)},loadReady:function g(j){f.provide(this.deps,j);this.deps=[]}}}};function d(f){c=f;c.addClass("Context",e)}if(module.addClass!==b){module.addClass({name:"Context",addClass:d})}else{if(exports!==b){exports.addClass=d}}})();(function(){var a,c,b={constructor:function(){this.loaders=c.instantiate("Store")},addLoader:function(f,e){this.loaders.set(f,e)},load:function(k,f){var j,h,g,e;for(j=0;h=k[j];j++){g=this.getScheme(h.uri);if((e=this.loaders.get(g))===a){return false}e.load(h.uri+h.id,h.api,this.createLoadedCb(h,f))}},loaded:function(g,e,f){if(e!==a){e.call(null,g,f)}},createLoadedCb:function(h,f){var g=this;return function e(){g.loaded.call(g,h,f,arguments)}},getScheme:function(e){return"http"}};function d(e){c=e;c.addClass("LoaderBase",b)}if(module.addClass!==a){module.addClass({name:"LoaderBase",addClass:d})}else{if(exports!==a){exports.addClass=d}}})();module.declare("genericPackage",[],function(b,d,a){var i;var e={};function h(k){if((k.length>0)&&(k.charAt(k.length-1)!=="/")){k=k+"/"}return e[objEscStr+k]}function g(l,k){if((l.length>0)&&(l.charAt(l.length-1)!=="/")){l=l+"/"}return e[objEscStr+l]=k}function j(l,k){if(!k){k=""}if(h(k+getFirstTerm(l)+"/")){k=k+getFirstTerm(l)+"/";l=cutFirstTerm(l);return j(l,k)}return{URI:h(k)+l,id:l}}function f(k){var l;if(k.uid&&k.uid!==this.uid){this.uid=k.uid;setPackage(k.uid,this)}this.mainId=(k.main)?this.uid+packageDelimiter+k.main:null;if(this.mainId){addDefer(this.mainId,this.startUp,this)}this.moduleUri=(k.directories&&k.directories.lib)?resolveUri(this.uri,k.directories.lib):resolveUri(this.uri,"lib");iterate(k.paths,function(n,m){this.setPath(n,resolvePath(this.moduleUri,m))},this);this.createMappings(k.mappings);return this}function c(k){iterate(k,function(m,n){var l={};l.uri=(n.location)?resolvePath(this.uri,n.location):"";l.uid=(n.uid)?n.uid:l.uri;this.setMapping(m,l);if(!getPackage(l.uid)){if(l.uri===""){throw"No mapping location for package: "+this.uid+" and mapping: "+m}(new Package(l.uid,l.uri)).loadPackageDef()}},this)}d.commonjs={create:function(k){}}});module.declare("scriptLoader",[],function(c,b,d){var e;function a(j){var i=Object.prototype.toString;return i.apply(j)==="[object Array]"}function h(j,i){return j===null||j===undefined||((a(j)&&!j.length))||(!i?j==="":false)}function f(n,m,l){if(h(n,true)){return}for(var k=0,j=n.length;k<j;k++){if(m.call(l||n[k],n[k],k,n)===false){return k}}}function g(k){var j,o,n,l=k.modules;this.env=k.env;this.testInteractive=!!k.env.ActiveXObject;this.timeout=k.timeout;this.scripts=[];this.transports=[];if((j=k.commonjsAPI.loaderPlugins)!==e){for(var m=0;o=j[m];m++){n=l.execute(o);if(!n||!(n=n.create(k,this))){throw new Error("No correct CommonJS loaderPlugin: "+o+" declaration!!")}this.transports.push(n)}}}g.prototype={load:function(k,j,i){if(i===e){return false}k+=".js";this.callTransports("initEnv",[this.env,k,j]);this.insertScriptTag(k,[k,j,i],this.ready,this);return true},ready:function(j,k,l){var i;if(k._done){throw new error("2nd time script ready call!!");return}this.cleanScriptTag(k);j.push(l);this.callTransports("loadReady",j)},getActiveURI:function(){var k,j;if(this.testInteractive){for(k=0;j=this.scripts[k];k++){if(j.readyState==="interactive"){return j._moduleURI}}}return e},callTransports:function(n,m){var j=this.transports.length,k,l;for(k=0;l=this.transports[k];k++){if(l[n]==e){throw new error("Transport plugin: "+l.name+" doesn't have function: "+n)}else{l[n].apply(l,m)}}},insertScriptTag:function(n,k,j,m){var o=this.env.document,i=o.getElementsByTagName("head")[0]||o.getElementsByTagName("body")[0],l=o.createElement("script");l._moduleURI=n;l._timer=setTimeout(this.scriptTimer(l,k,j,m),this.timeout);l.type="text/javascript";l.onload=l.onreadystatechange=this.scriptLoad(l,k,j,m);l.onerror=this.scriptError(l,k,j,m);l.src=n;this.scripts.push(l);i.insertBefore(l,i.firstChild)},cleanScriptTag:function(i){i._done=true;delete i._moduleURI;i.onload=i.onreadystatechange=new Function("");i.onerror=new Function("");if(i._timer){clearTimeout(i._timer)}f(this.scripts,function(k,j){if(i===k){this.scripts.splice(j,1)}},this)},scriptLoad:function(k,j,i,l){return function(){if(k._done||(typeof k.readyState!="undefined"&&!((k.readyState=="loaded")||(k.readyState=="complete")))){return}i.call(l,j,k,true)}},scriptError:function(k,j,i,l){return function(){i.call(l,j,k,false)}},scriptTimer:function(k,j,i,l){return function(){k._timer=0;i.call(l,j,k,false)}}};b.create=function(i){return new g(i)}});module.declare("moduleTransport",[],function(c,b,d){var e,h="_";function a(j){var i=Object.prototype.toString;return i.apply(j)==="[object Array]"}function g(){this.store={}}g.prototype={get:function(i){return this.store[h+i]},set:function(j,i){return this.store[h+j]=i},remove:function(j){var i=this.store[h+j];if(i!==e){delete this.store[h+j]}return i},exist:function(i){return(this.store[h+i]!==e)}};function f(i,j){this.defQueue=[];this.parent=j;this.apiStore=new g()}f.prototype={name:"moduleTransport",initEnv:function(j,l,i){var k=this;this.apiStore.set(l,i);if(!j.module){j.module={}}j.module.declare=function m(){k.declare.apply(k,arguments)}},loadReady:function(l,p,m,j){var k,n,o,r,q=[];for(n=0;k=this.defQueue[n];n++){if(k[3]!==e){o=k[3]}else{o=l}r=this.apiStore.get(o);r.memoize(k[0],k[1],k[2])}this.defQueue=[];p.loadReady(m);this.apiStore.remove(l)},declare:function(n,m,k){var i=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg;var l=/require\(["']([\w-_\.\/]+)["']\)/g;var j;if(typeof n!=="string"){k=m;m=n;n=null}if(!a(m)){k=m;m=[]}if(!name&&!m.length&&(typeof k==="function")){k.toString().replace(i,"").replace(l,function(o,p){m.push(p)})}j=this.parent.getActiveURI();this.defQueue.push([n,m,k,j])}};b.create=function(i,j){return new f(i,j)}});module.declare("system",[],function(b,a,d){var e=(typeof importScripts==="function");function c(i,h,f){if(e){postMessage([i,h,f])}else{var g=window;if(window.parent&&window.parent[i]){g=window.parent}if(g[i]){g[i](h,f)}}}a.stdio={print:function(f,g){c("printResults",f,g)}}});module.declare("test",["system"],function(b,a,c){var d=b("system");a.print=function(){var e=d.stdio;e.print.apply(e,arguments)};a.assert=function(f,e){if(f){a.print("PASS "+e,"pass")}else{a.print("FAIL "+e,"fail")}}});
